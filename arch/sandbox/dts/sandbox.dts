/dts-v1/;

/ {
	model = "Sandbox";
	compatible = "barebox,sandbox";

	#address-cells = <2>;
	#size-cells = <2>;

	aliases {
		bmode = &bmode;
	};

	chosen {
		environment {
			compatible = "barebox,environment";
			device-path = &part_env;
		};
	};

	memory {
		device_type = "memory";
		reg = <0 0 0 0>;
	};

	stickypage: stickypage {
		compatible = "barebox,hostfile", "syscon", "simple-mfd";
		reg = <0 0 0 4096>;
		barebox,cdev; /* no caching allowed */

		bmode: reboot-mode {
			compatible = "syscon-reboot-mode";
			offset = <0>;
			mask = <0xffffff00>;
			mode-normal = <0x00000000>;
			mode-loader = <0xbbbbbb00>;
		};

		partitions {
			compatible = "fixed-partitions";
			#address-cells = <1>;
			#size-cells = <1>;

			/* 0x00+4 reserved for syscon use */

			part_env: env@400 {
				reg = <0x400 0x800>;
				label = "env";
			};
		};
	};

	power {
		compatible = "barebox,sandbox-power";
		barebox,reset-source = <&stickypage 0>;
	};
};
